#!/usr/bin/env sh

sketchybar --add event aerospace_workspace_change

RED=0xffed8796

# Adiciona workspaces 1 a 6
for sid in $(aerospace list-workspaces --all); do
  if [ "$sid" -ge 1 ] && [ "$sid" -le 6 ]; then
    sketchybar --add item "space.$sid" left \
      --subscribe "space.$sid" aerospace_workspace_change \
      --set "space.$sid" \
        icon="$sid" \
        icon.padding_left=22 \
        icon.padding_right=22 \
        label.padding_right=33 \
        icon.highlight_color=$RED \
        background.color=0x44ffffff \
        background.corner_radius=5 \
        background.height=30 \
        background.drawing=off \
        label.font="sketchybar-app-font:Regular:16.0" \
        label.background.height=30 \
        label.background.drawing=on \
        label.background.color=0xff494d64 \
        label.background.corner_radius=9 \
        label.drawing=off \
        click_script="aerospace workspace $sid" \
        script="$CONFIG_DIR/plugins/aerospacer.sh $sid"
  fi
done

# Verifica se o monitor secundário está conectado
if aerospace list-monitors --json | grep -q '"monitor-name"\s*:\s*"LC27G7xT"'; then
  # Adiciona separator
  sketchybar --add item separator left
  sketchybar --set separator \
    label="|" \
    icon.font="Hack Nerd Font:Regular:16.0" \
    background.padding_left=15 \
    background.padding_right=15 \
    label.drawing=on \
    icon.color=0xffffffff
  # Adiciona workspaces 7 e 8
  for sid in 7 8; do
    sketchybar --add item "space.$sid" left \
      --subscribe "space.$sid" aerospace_workspace_change \
      --set "space.$sid" \
        icon="$sid" \
        icon.padding_left=22 \
        icon.padding_right=22 \
        label.padding_right=33 \
        icon.highlight_color=$RED \
        background.color=0x44ffffff \
        background.corner_radius=5 \
        background.height=30 \
        background.drawing=off \
        label.font="sketchybar-app-font:Regular:16.0" \
        label.background.height=30 \
        label.background.drawing=on \
        label.background.color=0xff494d64 \
        label.background.corner_radius=9 \
        label.drawing=off \
        click_script="aerospace workspace $sid" \
        script="$CONFIG_DIR/plugins/aerospacer.sh $sid"
  done
fi


# #!/usr/bin/env sh
#
# sketchybar --add event aerospace_workspace_change
# RED=0xffed8796
# for sid in $(aerospace list-workspaces --all); do
#     sketchybar --add item "space.$sid" left \
#         --subscribe "space.$sid" aerospace_workspace_change \
#         --set "space.$sid" \
#         icon="$sid"\
#                               icon.padding_left=22                          \
#                               icon.padding_right=22                         \
#                               label.padding_right=33                        \
#                               icon.highlight_color=$RED                     \
#                               background.color=0x44ffffff \
#                               background.corner_radius=5 \
#                               background.height=30 \
#                               background.drawing=off                         \
#                               label.font="sketchybar-app-font:Regular:16.0" \
#                               label.background.height=30                    \
#                               label.background.drawing=on                   \
#                               label.background.color=0xff494d64             \
#                               label.background.corner_radius=9              \
#                               label.drawing=off                             \
#         click_script="aerospace workspace $sid" \
#         script="$CONFIG_DIR/plugins/aerospacer.sh $sid"
# done
#
# sketchybar   --add item       separator left                          \
#              --set separator  icon=                                  \
#                               icon.font="Hack Nerd Font:Regular:16.0" \
#                               background.padding_left=15              \
#                               background.padding_right=15             \
#                               label.drawing=off                       \
#                               associated_display=active               \
#                               icon.color=$WHITE
